{% set user = get_logged_in_user() %}
<h1>Mein Pflanzenfreund abonnieren</h1>
<div class="row">
	<div class="col-sm-8">
		<p>Abonnieren Sie jetzt den «Pflanzenfreund» mit den wesentlichen
Informationen zum umweltgerechten Gärtnern, mit Hintergrundberichten
und vernünftigen Produktempfehlungen als Probeoder
Jahresabonnement, und Sie erhalten jede Ausgabe mit dem
kostenlosen Frei-Haus-Service pünktlich nach Hause.</p>
	</div>
	<div class="col-sm-4">
	</div>
</div>
<div class="row">
	<div class="col-sm-4">
		<div class="card">
			<img src="/assets/pflanzenfreund/images/800x400_Jahresabo_lay.jpg" alt="Jahres-Abo" style="width:100%">
			<div style="text-align: center;">
				<p class="title">Ihr Jahres-Abonnement:</p>
				<p class="price">nur Fr. 42.-</p>
				<p class="additional-text">anstatt 48.-, (inklusive Porto)</p>
				<p class="second-text"style="padding: 10px;">12 Ausgaben pünktlich zum Monatsbeginn.</p>
				<a class="btn btn-primary order-btn btn-bot" onclick="checkLogin('Jahres-Abo')">Jetzt bestellen</a>
			</div>
		</div>
	</div>
	<div class="col-sm-4">
		<div class="card">
			<img src="/assets/pflanzenfreund/images/800x400_Probeabo_lay-1.jpg" alt="Probe-Abo" style="width:100%">
			<div style="text-align: center;">
				<p class="title">Ihr Probe-Abonnement:</p>
				<p class="price">nur Fr. 14.-</p>
				<p class="additional-text">(inklusive Porto)</p>
				<p class="second-text"style="padding: 10px;">Mit den nächsten 4 Ausgaben immer gut informiert.</p>
				<a class="btn btn-primary order-btn btn-bot" onclick="checkLogin('Probe-Abo')">Jetzt bestellen</a>
			</div>
		</div>
	</div>
	<div class="col-sm-4">
		<div class="card">
			<img src="/assets/pflanzenfreund/images/800x400_Geschenkabo_lay.jpg" alt="Geschenk-Abo" style="width:100%">
			<div style="text-align: center;">
				<p class="title">Ihr Geschenk-Abonnement:</p>
				<p class="price">nur Fr. 42.-</p>
				<p class="additional-text">(inklusive Porto)</p>
				<p class="second-text"style="padding: 10px;">12 Ausgaben. Ein aussergewöhnliches Geschenk, mit dem Sie in Erinnerung bleiben.</p>
				<a class="btn btn-primary order-btn btn-bot" onclick="checkLogin('Geschenk-Abo')">Jetzt bestellen</a>
			</div>
		</div>
	</div>
</div>

 <!-- The overlay -->
<div id="orderModal" class="overlay">

  <!-- Button to close the overlay navigation -->
  <a href="javascript:void(0)" class="closebtn" onclick="closeOrderModal()">&times;</a>
  
  <img class="modalIMG" src="/assets/pflanzenfreund/images/Pflanzenfreund_Logo_neg.png">
  

  <!-- Overlay content -->
  <div class="overlay-content">

  
  
  
  
  
  
  
{% if not hide_order %}
<div id="account-check">
{% set act_user = frappe.get_doc('User', frappe.user) %}
<!-- One "tab" for each step in the form: -->
<div class="tab"><h1>Bitte überprüfen Sie Ihre Kontoinformationen:</h1>
  <p><input id="inp_first_name" value="{% if act_user.first_name == None %}{% else %}{{ act_user.first_name }}{% endif %}" placeholder="First name..." oninput="this.className = ''"></p>
  <p><input id="inp_last_name" value="{% if act_user.last_name == None %}{% else %}{{ act_user.last_name }}{% endif %}" placeholder="Last name..." oninput="this.className = ''"></p>
  <p><input value="{% if act_user.email == None %}{% else %}{{ act_user.email }}{% endif %}" placeholder="E-mail..." oninput="this.className = ''" readonly></p>
  <p><input id="inp_phone" value="{% if act_user.phone == None %}{% else %}{{ act_user.phone }}{% endif %}" placeholder="Phone..." oninput="this.className = ''" data-leer="ok"></p>
  <p><input id="inp_mobile" value="{% if act_user.mobile_no == None %}{% else %}{{ act_user.mobile_no }}{% endif %}" placeholder="Mobile..." oninput="this.className = ''"></p>
</div>

<div class="tab"><h1>Auswahl der Adressen:</h1>
<div class="row">

<div class="col-sm-7">
	<button class="accordion" id="lieferadresse-titel"><i class="fa fa-plus"></i> Verfügbare Lieferadressen</button>
	<div class="panel">
	  <div id="shipping-adressen">
		<div class="row">
			{% for address in get_all_addresses() %}
			{% set address_details = get_address_details(address.parent) %}
			<div class="col-sm-4" style="padding-right: 5px; padding-left: 5px;">
			<div class="shipping-addresscard" id="shipping-{{ address.parent }}" onclick="selectaddress('shipping-{{ address.parent }}', 'shipping')" data-addressname = "{{ address.parent }}">
				<div class="addresscontainer">
					<p>{{ address_details.address_line1 or '' }}<br>{% if address_details.address_line2 %}{{ address_details.address_line2 }}<br>{% endif %}{{ address_details.city or '' }}<br>{{ address_details.pincode or '' }}</p>
				</div>
			</div> 
			</div>
			{% endfor %}
		</div>
		</div>
	</div>

	<button class="accordion" id="rechnungsadresse-titel"><i class="fa fa-plus"></i> Verfügbare Rechnungsadressen</button>
	<div class="panel">
	  <div id="billing-adressen">
		<div class="row">
			{% for address in get_all_addresses() %}
			{% set address_details = get_address_details(address.parent) %}
			<div class="col-sm-4" style="padding-right: 5px; padding-left: 5px;">
			<div class="billing-addresscard" id="billing-{{ address.parent }}" onclick="selectaddress('billing-{{ address.parent }}', 'billing')" data-addressname = "{{ address.parent }}">
				<div class="addresscontainer">
					<p>{{ address_details.address_line1 or '' }}<br>{% if address_details.address_line2 %}{{ address_details.address_line2 }}<br>{% endif %}{{ address_details.city or '' }}<br>{{ address_details.pincode or '' }}</p>
				</div>
			</div> 
			</div>
			{% endfor %}
		</div>
		</div>
	</div>
</div>
<div class="col-sm-5">
	<div id="shipping-adresse"><b>Ausgewählte Lieferadresse:</b><div></div></div>
	<p id="keineShippingAdresse">Keine Adresse ausgewählt</p><br>
	<div id="billing-adresse"><b>Ausgewählte Rechnungsadresse:</b><div></div></div>
	<p id="keineBillingAdresse">Keine Adresse ausgewählt</p>
</div>
</div>

<p id="hilfetext">Ihre Adresse ist nicht dabei oder nicht korrekt? Kein Problem - <a href="/addresses" class="normal-link">hier können Sie eine neue erstellen oder bestehende ändern.</a></p>
</div>

<div style="overflow:auto;">
  <div style="float:right;">
    <button class="btn btn-modal btn-primary" type="button" id="prevBtn" onclick="nextPrev(-1)">Zurück</button>
    <button class="btn btn-modal btn-primary" type="button" id="nextBtn" onclick="nextPrev(1)">Weiter</button>
	<button class="btn btn-modal btn-primary" style="display: none;" type="button" id="orderBtn" onclick="place_order()">Bestellen</button>
  </div>
</div>


<!-- Circles which indicates the steps of the form: -->
<div style="text-align:center;margin-top:40px;">
  <span class="step"></span>
  <span class="step"></span>
</div>
</div>
{% endif %}
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  </div>

</div>








<!-- GESCHENK -->
<!-- The overlay -->
<div id="orderModalGeschenk" class="overlay">

  <!-- Button to close the overlay navigation -->
  <a href="javascript:void(0)" class="closebtn" onclick="closeOrderModal()">&times;</a>
  
  <img class="modalIMG" src="/assets/pflanzenfreund/images/Pflanzenfreund_Logo_neg.png">
  

  <!-- Overlay content -->
  <div class="overlay-content">

  
  
  
  
  
  
  
{% if not hide_order %}
<div id="account-checkGeschenk">
{% set act_user = frappe.get_doc('User', frappe.user) %}
<!-- One "tab" for each step in the form: -->
<div class="tabGeschenk"><h1>Bitte überprüfen Sie Ihre Kontoinformationen:</h1>
  <p><input id="geschenk_inp_first_name" value="{% if act_user.first_name == None %}{% else %}{{ act_user.first_name }}{% endif %}" placeholder="First name..." oninput="this.className = ''"></p>
  <p><input id="geschenk_inp_last_name" value="{% if act_user.last_name == None %}{% else %}{{ act_user.last_name }}{% endif %}" placeholder="Last name..." oninput="this.className = ''"></p>
  <p><input value="{% if act_user.email == None %}{% else %}{{ act_user.email }}{% endif %}" placeholder="E-mail..." oninput="this.className = ''" readonly></p>
  <p><input id="geschenk_inp_phone" value="{% if act_user.phone == None %}{% else %}{{ act_user.phone }}{% endif %}" placeholder="Phone..." oninput="this.className = ''" data-leer="ok"></p>
  <p><input id="geschenk_inp_mobile" value="{% if act_user.mobile_no == None %}{% else %}{{ act_user.mobile_no }}{% endif %}" placeholder="Mobile..." oninput="this.className = ''"></p>
</div>

<div class="tabGeschenk"><h1>Bitte erfassen Sie die Daten des Geschenk Empfängers:</h1>
  <p><input id="inp_first_name_donee" value="" placeholder="First name..." oninput="this.className = ''"></p>
  <p><input id="inp_last_name_donee" value="" placeholder="Last name..." oninput="this.className = ''"></p>
  <p><input id="inp_email_donee" value="" placeholder="E-mail..." oninput="this.className = ''" data-leer="ok"></p>
  <p><input id="inp_phone_donee" value="" placeholder="Phone..." oninput="this.className = ''" data-leer="ok"></p>
  <p><input id="inp_mobile_donee" value="" placeholder="Mobile..." oninput="this.className = ''"></p>
  <p><input id="inp_street_donee" value="" placeholder="Street..." oninput="this.className = ''"></p>
  <p><input id="inp_plz_donee" value="" placeholder="Postleitzahl..." oninput="this.className = ''"></p>
  <p><input id="inp_ort_donee" value="" placeholder="Ort..." oninput="this.className = ''"></p>
</div>

<div class="tabGeschenk"><h1>Auswahl der Adressen:</h1>
<div class="row">

<div class="col-sm-7">
	<button class="accordion hidden" id="lieferadresse-titel"><i class="fa fa-plus"></i> Verfügbare Lieferadressen</button>
	<div class="panel">
	  <div id="shipping-adressen">
		<div class="row">
			{% for address in get_all_addresses() %}
			{% set address_details = get_address_details(address.parent) %}
			<div class="col-sm-4">
			<div class="shipping-addresscard" id="shipping-{{ address.parent }}-Geschenk" onclick="selectaddress('shipping-{{ address.parent }}-Geschenk', 'shipping')" data-addressname = "{{ address.parent }}">
				<div class="addresscontainer">
					<p>{{ address_details.address_line1 or '' }}<br>{{ address_details.address_line2 or '' }}<br>{{ address_details.city or '' }}<br>{{ address_details.pincode or '' }}</p>
				</div>
			</div> 
			</div>
			{% endfor %}
		</div>
		</div>
	</div>

	<button class="accordion" id="rechnungsadresse-titel"><i class="fa fa-plus"></i> Verfügbare Rechnungsadressen</button>
	<div class="panel">
	  <div id="billing-adressen">
		<div class="row">
			{% for address in get_all_addresses() %}
			{% set address_details = get_address_details(address.parent) %}
			<div class="col-sm-4">
			<div class="billing-addresscard" id="billing-{{ address.parent }}-Geschenk" onclick="selectaddress('billing-{{ address.parent }}-Geschenk', 'billing')" data-addressname = "{{ address.parent }}">
				<div class="addresscontainer">
					<p>{{ address_details.address_line1 or '' }}<br>{{ address_details.address_line2 or '' }}<br>{{ address_details.city or '' }}<br>{{ address_details.pincode or '' }}</p>
				</div>
			</div> 
			</div>
			{% endfor %}
		</div>
		</div>
	</div>
</div>
<div class="col-sm-5">
	<div id="shipping-adresse-Geschenk"><b>Ausgewählte Lieferadresse:</b>
		<div class="shipping-addresscard">
			<div class="addresscontainer"><p id="placeholder-for-geschenk-adresse"></p></div>
		</div>
	</div>
	<p id="keineShippingAdresse-Geschenk" class="hidden"></p>
	<div id="billing-adresse-Geschenk"><b>Ausgewählte Rechnungsadresse:</b><div></div></div>
	<p id="keineBillingAdresse-Geschenk">Keine Adresse ausgewählt</p>
</div>
</div>

<p id="hilfetext">Ihre Adresse ist nicht dabei oder nicht korrekt? Kein Problem - <a href="/addresses" class="normal-link">hier können Sie eine neue erstellen oder bestehende ändern.</a></p>
</div>

<div style="overflow:auto;">
  <div style="float:right;">
    <button class="btn btn-modal btn-primary" type="button" id="prevBtnGeschenk" onclick="nextPrevGeschenk(-1)">Zurück</button>
    <button class="btn btn-modal btn-primary" type="button" id="nextBtnGeschenk" onclick="nextPrevGeschenk(1)">Weiter</button>
	<button class="btn btn-modal btn-primary" style="display: none;" type="button" id="orderBtnGeschenk" onclick="place_order()">Bestellen</button>
  </div>
</div>


<!-- Circles which indicates the steps of the form: -->
<div style="text-align:center;margin-top:40px;">
  <span class="stepGeschenk"></span>
  <span class="stepGeschenk"></span>
  <span class="stepGeschenk"></span>
</div>
</div>
{% endif %}
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  </div>

</div>

<div id="myNav" class="overlay">
	<!-- Overlay content -->
  <div class="overlay-content">
    <p><i class="fa fa-spinner fa-spin" style="font-size:80px"></i></p>
    <p>Bitte warten, Ihr Abo wird erstellt.</p>
  </div>

</div>

<style>
{% include "public/css/abonnieren.css" %}
</style>
<script>
{% include "public/js/web_abonnieren.js" %}
{% include "public/js/account_check.js" %}
</script>